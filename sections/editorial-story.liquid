{% liquid
  assign selected_page = pages[section.settings.story_page]
  assign story_title = section.settings.heading
  assign story_body = section.settings.body

  if selected_page != blank
    assign story_title = selected_page.title
    assign story_body = selected_page.content
  endif
%}

<section class="section-shell">
  <div class="page-width editorial-story__layout">
    {% if section.settings.image != blank %}
      <div class="editorial-story__image">
        {{ section.settings.image | image_url: width: 1600 | image_tag: widths: '480,720,960,1200,1600', sizes: '(min-width: 900px) 40vw, 100vw', loading: 'lazy' }}
      </div>
    {% endif %}

    <div class="editorial-story__content">
      {% if section.settings.kicker != blank %}
        <p class="section-kicker">{{ section.settings.kicker }}</p>
      {% endif %}
      <h2 class="section-heading">{{ story_title }}</h2>
      {% render 'ornamental-divider', style: section.settings.divider_style %}
      <div class="rte">{{ story_body }}</div>
      {% if section.settings.cta_label != blank and section.settings.cta_link != blank %}
        <a class="btn btn-secondary" href="{{ section.settings.cta_link }}">{{ section.settings.cta_label }}</a>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Editorial story",
  "settings": [
    {
      "type": "text",
      "id": "kicker",
      "label": "Kicker",
      "default": "Our curation"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "A boutique approach to Catholic gifting"
    },
    {
      "type": "richtext",
      "id": "body",
      "label": "Body",
      "default": "<p>Each piece is selected for beauty, craftsmanship, and spiritual depth so your gift feels worthy of the moment.</p>"
    },
    {
      "type": "page",
      "id": "story_page",
      "label": "Optional page source"
    },
    {
      "type": "select",
      "id": "divider_style",
      "label": "Ornamental divider",
      "default": "arabesque",
      "options": [
        {
          "value": "arabesque",
          "label": "Arabesque"
        },
        {
          "value": "line",
          "label": "Line"
        },
        {
          "value": "botanical",
          "label": "Botanical"
        }
      ]
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "cta_label",
      "label": "Button label",
      "default": "Meet the atelier"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Button link"
    }
  ],
  "presets": [
    {
      "name": "Editorial story"
    }
  ]
}
{% endschema %}
