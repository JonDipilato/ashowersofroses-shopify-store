<section class="section-shell">
  <div class="page-width">
    <p style="margin: 0 0 0.5rem;"><a href="{{ routes.account_url }}">&larr; Back to account</a></p>
    <h1 class="section-heading">{{ order.name }}</h1>
    <p class="section-subhead">Placed on {{ order.created_at | date: '%B %d, %Y' }}</p>

    <div style="margin-top: 1.6rem; display: grid; gap: 1rem;">
      {% for line_item in order.line_items %}
        <div class="card-surface" style="padding: 1rem; display: grid; grid-template-columns: 64px 1fr; gap: 0.8rem; align-items: start;">
          {% if line_item.image %}
            <img src="{{ line_item.image | image_url: width: 128 }}" alt="{{ line_item.title | escape }}" style="width: 64px; height: 80px; object-fit: cover; border-radius: 6px;">
          {% else %}
            <div style="width: 64px; height: 80px; background: rgba(0,0,0,0.04); border-radius: 6px;"></div>
          {% endif %}
          <div>
            <p style="margin: 0; font-family: var(--font-display); font-size: 1rem;">{{ line_item.title }}</p>
            {% if line_item.variant.title != 'Default Title' %}
              <p style="margin: 0.2rem 0 0; font-size: 0.82rem; opacity: 0.7;">{{ line_item.variant.title }}</p>
            {% endif %}
            <p style="margin: 0.3rem 0 0; font-size: 0.88rem;">
              {{ line_item.original_price | money }} &times; {{ line_item.quantity }}
              &mdash; {{ line_item.final_line_price | money }}
            </p>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="card-surface" style="padding: 1rem; margin-top: 1.4rem; max-width: 400px; display: grid; gap: 0.4rem;">
      <div style="display: flex; justify-content: space-between;"><span>Subtotal</span><span>{{ order.line_items_subtotal_price | money }}</span></div>
      {% for shipping_method in order.shipping_methods %}
        <div style="display: flex; justify-content: space-between;"><span>Shipping ({{ shipping_method.title }})</span><span>{{ shipping_method.price | money }}</span></div>
      {% endfor %}
      {% if order.tax_price > 0 %}
        <div style="display: flex; justify-content: space-between;"><span>Tax</span><span>{{ order.tax_price | money }}</span></div>
      {% endif %}
      <div style="display: flex; justify-content: space-between; font-weight: 600; padding-top: 0.5rem; border-top: 1px solid rgba(0,0,0,0.1);"><span>Total</span><span>{{ order.total_net_amount | money }}</span></div>
    </div>

    <div style="margin-top: 1.4rem; display: grid; gap: 1rem; max-width: 400px;">
      <div>
        <h3 style="font-family: var(--font-display); font-size: 1.1rem; margin: 0;">Shipping address</h3>
        <p style="margin: 0.4rem 0 0;">{{ order.shipping_address | format_address }}</p>
      </div>
      <div>
        <h3 style="font-family: var(--font-display); font-size: 1.1rem; margin: 0;">Payment status</h3>
        <p style="margin: 0.4rem 0 0;">{{ order.financial_status_label }}</p>
      </div>
      <div>
        <h3 style="font-family: var(--font-display); font-size: 1.1rem; margin: 0;">Fulfillment status</h3>
        <p style="margin: 0.4rem 0 0;">{{ order.fulfillment_status_label }}</p>
      </div>
    </div>
  </div>
</section>
